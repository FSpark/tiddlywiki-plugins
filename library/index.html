<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="application-name" content="TiddlyWiki Plugin Library" />
<meta name="application-version" content="v0.0.0" />
<meta name="copyright" content="Copyright 2015 Jeremy Ruston" />
<link id="faviconLink" rel="shortcut icon" href="favicon.ico">
<title>Plugin Library</title>
<script>
var assetList = [
    {
        "title": "$:/plugins/linonetwo/commandpalette",
        "description": "Command palette Chinese translated",
        "author": "linonetwo",
        "version": "0.2.1",
        "core-version": ">=5.0.8",
        "list": "readme",
        "source": "https://github.com/tiddly-gittly/tiddlywiki-plugins",
        "dependents": "$:/plugins/linonetwo/pinyin-fuzzy-search",
        "plugin-type": "plugin",
        "type": "application/json",
        "requires-reload": "yes"
    },
    {
        "title": "$:/plugins/linonetwo/copy-on-select",
        "description": "Copy what you are selecting inside the wiki into the clipboard",
        "author": "LinOnetwo",
        "core-version": ">=5.1.22",
        "plugin-type": "plugin",
        "version": "0.0.1",
        "list": "readme",
        "dependents": "",
        "type": "application/json",
        "readme": "!! 动机\n\n我已经习惯了用方便的[[Copy On Select|https://addons.mozilla.org/en-US/firefox/addon/copy-on-select]] Firefox 插件，现在到了 TiddlyWiki 里我经常还是以为选中了就复制了，然后黏贴到别的地方才发现其实并没有复制，很不习惯。\n\n所以我自己重新写了一个适配 TiddlyWiki 的选中即复制脚本。\n\n!! 用法\n\n选中编辑器、按钮等区域以外的任何文本都会直接复制。\n\n这个插件里的条件语句让它在编辑器等特殊区域内不会起作用，以免干扰「全选黏贴覆盖原有内容」等操作。\n",
        "requires-reload": "no"
    },
    {
        "title": "$:/plugins/linonetwo/github-external-image",
        "description": "Use github as your image storage, add _canonical_uri to all image, pointing to raw.github",
        "author": "LinOnetwo",
        "core-version": ">=5.1.22",
        "plugin-type": "plugin",
        "version": "0.0.1",
        "list": "readme",
        "dependents": "",
        "type": "application/json",
        "requires-reload": "no"
    },
    {
        "title": "$:/plugins/linonetwo/inverse-link-and-folder",
        "description": "Add inverse link (bi-directional link) and folder information to the bottom of tiddlers",
        "author": "LinOnetwo",
        "core-version": ">=5.1.22",
        "plugin-type": "plugin",
        "version": "0.0.3",
        "list": "readme",
        "dependents": "",
        "type": "application/json",
        "readme": "!! Features\n\nThis plugin provides these additional info on the bottom of every tiddler:\n\n# other tiddler linking to this tiddler\n# tiddlers in this folder (tagged with this tiddler's title, see tw-locator's document for detail about the tag-based folder structure)\n# folders containing this tiddler (since tag-based folder structure is a Graph, so there may be many)\n\nYou can change [[infobar.tid|$:/plugins/linonetwo/inverse-link-and-folder/infobar]] to add more info.\n\n[[list-link.tid|$:/plugins/linonetwo/inverse-link-and-folder/list-link]] and [[list-link.css|$:/plugins/linonetwo/inverse-link-and-folder/list-link.css]] are styles of that info bar.\n\n!! Credits\n\nThis plugin is inspired by RoamResearch. list-link macro and filter in infobar is learnt from  copy&paste-ing of Jeremy's code and tutorials.\n",
        "requires-reload": "no"
    },
    {
        "title": "$:/plugins/linonetwo/itonnote",
        "name": "ItonNote",
        "description": "Heavy lifting for new users to set up a powerful and opinionated knowledge management system.",
        "author": "LinOnetwo",
        "core-version": ">=5.1.22",
        "plugin-type": "plugin",
        "version": "0.3.2",
        "list": "readme description ControlPanel",
        "dependents": "$:/plugins/bimlas/locator",
        "type": "application/json",
        "readme": "!! 功能\n\n预配置了一系列琐碎的内容，一般来自各插件的Readme和论坛讨论，但大多数人懒得看Readme，故在此直接帮忙配置好了。\n\n具体预置内容介绍可见[[Description|$:/plugins/linonetwo/itonnote/description]]。\n\n{{$:/plugins/linonetwo/itonnote/ControlPanel}}\n",
        "requires-reload": "yes"
    },
    {
        "title": "$:/plugins/linonetwo/opened-tiddlers-bar",
        "name": "Opened Tiddlers Bar",
        "description": "VSCode style opened files top bar",
        "author": "LinOnetwo",
        "core-version": ">=5.1.22",
        "plugin-type": "plugin",
        "version": "0.1.0",
        "list": "Readme LICENSE",
        "dependents": "",
        "type": "application/json",
        "requires-reload": "no"
    },
    {
        "title": "$:/plugins/linonetwo/pinyin-fuzzy-search",
        "description": "提供模糊搜索和拼音搜索的能力",
        "author": "LinOnetwo",
        "core-version": ">=5.1.22",
        "plugin-type": "plugin",
        "version": "0.1.2",
        "list": "readme",
        "dependents": "",
        "type": "application/json",
        "readme": "",
        "requires-reload": "yes"
    },
    {
        "title": "$:/plugins/linonetwo/prevent-edit",
        "description": "Prevent \"This page is asking you to confirm that you want to leave\" in a read-only site",
        "author": "LinOnetwo",
        "core-version": ">=5.1.22",
        "plugin-type": "plugin",
        "version": "0.0.1",
        "list": "readme",
        "dependents": "",
        "type": "application/json",
        "readme": "!! 功能\n\n这个插件主要是让在线部署后的 Wiki 不会弹出「有变动关闭网页前请保存」这样的对话框。\n\n!! 动机\n\n来自 TiddlyMap 的 [[$:/plugins/felixhayashi/tiddlymap/misc/defaultViewHolder]] 和来自系统的 [[$:/StoryList]] 老是自动变：\n\n```diff\ncreated: 20200409022623558\ncreator: Lin Onetwo - 林一二\n-modified: 20200414104033109\n+modified: 20200414135126182\nmodifier: Lin Onetwo - 林一二\ntitle: $:/plugins/felixhayashi/tiddlymap/misc/defaultViewHolder\ntype: text/vnd.tiddlywiki\n```\n\n没有实质性的变化，而且又经常发生在 wiki 部署后，这样在线版 wiki 就会弹出「This page is asking you to confirm that you want to leave - data you have entered may not be saved」。\n\n但我只是想做浏览不想做编辑啊，这让我觉得很烦。\n\n后来发现原来是 onbeforeunload 导致的，[[我去仓库里搜到了|https://github.com/Jermolene/TiddlyWiki5/search?q=beforeunload&unscoped_q=beforeunload]]是 `$tw.utils.each($tw.unloadTasks` 在用它，所以我就过滤了一下 `$tw.unloadTasks`。而且还不能立即做这个过滤，因为 `$:/tags/RawMarkup` 是在沙盒里执行的，不能修改 `$tw` 。\n\n所以最终我跟着 [[Adding Babel Polyfill to TiddlyWiki|https://tiddlywiki.com/dev/#Adding%20Babel%20Polyfill%20to%20TiddlyWiki]] 这篇教程，加了一个 startup script，在启动时、上述代码之后，就清理掉那个导致弹窗的 unloadTask，世界终于清静了。\n\n最终，我把它包装成了这个 [[prevent-edit|$:/plugins/linonetwo/prevent-edit]] 插件。\n",
        "requires-reload": "yes"
    },
    {
        "title": "$:/plugins/linonetwo/preview-glass",
        "description": "Glassify Modification to the tobibeer/preview plugin, add inverse links, and make it auto-close",
        "author": "LinOnetwo",
        "version": "0.5.7",
        "core-version": ">=5.1.22",
        "list": "readme config motivation",
        "source": "https://github.com/tobibeer/tw5-preview",
        "documentation": "https://tobibeer.github.io/tw5-preview",
        "plugin-type": "plugin",
        "dependents": "$:/plugins/tobibeer/appear $:/plugins/ooktech/dynamic-tables $:/plugins/linonetwo/inverse-link-and-folder",
        "plugin-priority": "1",
        "type": "application/json",
        "readme": "!! About\n\nModification to the [[tobibeer/preview plugin|https://tobibeer.github.io/tw5-plugins/#preview]], make it auto close if mouse move out of the link (as discussed in the [[issue#1|https://github.com/tobibeer/tw5-preview/issues/1]]), and add custom style, make it like a glass.\n\n!! Prerequisit\n\nThis plugin has three dependencies:\n\n# [[tobibeer/appear|http://tobibeer.github.io/tw5-plugins/#appear]] to make popup work\n# [[$:/plugins/ooktech/dynamic-tables]] to make fields table in the popup template\n# [[$:/plugins/linonetwo/inverse-link-and-folder]] to make bi-directional links in the popup template\n\n!! This Plugin is a Forked version\n\nOriginal source is located in [[https://github.com/tobibeer/tw5-preview]], which has version 0.5.6 at several years ago, so maybe this plugin can be 0.5.7?\n\nSee [[document of tobibeer/preview|https://tobibeer.github.io/tw5-plugins/#preview]] to get more usage and explaination.\n\nThis plugin provides some new template, which depends on some other plugin to work, see plugin.info for detail.\n\n- [[$:/plugins/linonetwo/preview-glass/preview-template.css]] new styles\n- [[$:/plugins/linonetwo/preview-glass/template]] new template\n\nAnd some overrides:\n\n- [[$:/plugins/tobibeer/preview/link.js]] is override by this plugin, by providing a new js with same title\n- [[$:/plugins/tobibeer/preview/defaults/not]] set some link to not have pop up.\n- [[$:/plugins/tobibeer/preview/defaults/class]] and [[$:/plugins/tobibeer/preview/defaults/template]] override the template and style settings\n- [[$:/plugins/tobibeer/preview/defaults/delay]] change the popup delay\n",
        "requires-reload": "yes"
    },
    {
        "title": "$:/plugins/linonetwo/service-worker",
        "description": "Use service worker to cache content, make it works even offline, and can be add to the desktop as an App.",
        "author": "LinOnetwo",
        "core-version": ">=5.1.22",
        "plugin-type": "plugin",
        "version": "0.0.1",
        "list": "readme",
        "dependents": "",
        "type": "application/json",
        "readme": "!! Usage\n\nAfter install, you have to publish your wiki as a HTTPS website to make it work.\n\n!!! Make sure to include all necessary step in the build process\n\nAdd following files to your `/public` folder after build, you can use a script to copy them to the build folder after the wiki build process:\n\n1. Add a `manifest.webmanifest` like:\n\n```json\n{\n  \"background_color\": \"white\",\n  \"theme_color\": \"white\",\n  \"description\": \"Meme of LinOnetwo 林一二的模因和想法 - TiddlyWiki 非线性的知识库和博客\",\n  \"display\": \"standalone\",\n  \"icons\": [\n    {\n      \"src\": \"/TiddlyWikiIconBlack.png\",\n      \"sizes\": \"256x256\",\n      \"type\": \"image/png\"\n    },\n    {\n      \"src\": \"/TiddlyWikiIconWhite.png\",\n      \"sizes\": \"144x144\",\n      \"type\": \"image/png\"\n    }\n  ],\n  \"name\": \"TiddlyWiki\",\n  \"short_name\": \"Wiki\",\n  \"lang\": \"zh-CN\",\n  \"start_url\": \"/\",\n  \"scope\": \"/\"\n}\n```\n\nMake sure icon size is at least 144x144. And change all necessary fields.\n\n2. Add `service-worker.js`:\n\nSee [[https://github.com/linonetwo/Meme-of-LinOnetwo/public/service-worker.js|https://github.com/linonetwo/Meme-of-LinOnetwo/blob/d088f72a2b95ee21b68af1b349d9993a3997bf19/Meme-of-LinOnetwo/public/service-worker.js]] for example.\n\n!!! Config router\n\nSometimes request from this plugin to your `service-worker.js` will resulted in 404, this is basically because you are not putting `service-worker.js` just besides your `index.html`, or the router config is wrong.\n",
        "requires-reload": "no"
    },
    {
        "title": "$:/plugins/linonetwo/source-control-management",
        "name": "NodeJS Wiki TiddlyGit Github Sync",
        "description": "Use TiddlyGit's NodeJS API to sync data to git on the cloud",
        "author": "LinOnetwo",
        "core-version": ">=5.1.22",
        "plugin-type": "plugin",
        "version": "0.1.0",
        "list": "readme",
        "dependents": "",
        "type": "application/json",
        "readme": "!! 功能\n\n[[WebCatalog|https://webcatalogapp.com/]] 除了[[能将 TiddlyWiki 包装成桌面应用|https://onetwo.ren/%E7%94%A8tiddlywiki%E6%9B%BF%E4%BB%A3notion%E5%92%8Cevernote%E7%AE%A1%E7%90%86%E7%9F%A5%E8%AF%86/]]以外，还提供了自定义 API 并暴露给网页的功能，让我们可以在 Wiki 网页里使用一些高级功能。\n\n本插件利用暴露的自定义 API 实现：\n\n# 查看本地 NodeJS 版 TiddlyWiki 是否完全与 Github 备份云同步了\n# 一键同步本地和云端\n\n!! 用法\n\n当点开 SCM 标签页的时候，会进行一次 git 环境检查，因为使用的 git 库 dugite 比较卡，所以只进行一次检查，如果需要刷新，需要来回切换一下 tab。\n",
        "requires-reload": "yes"
    },
    {
        "title": "$:/plugins/linonetwo/sub-wiki",
        "name": "Private Tiddlers In Private Repo",
        "description": "Allow you make some tiddlers private, and store them in a private repo.",
        "author": "LinOnetwo",
        "core-version": ">=5.1.22",
        "plugin-type": "plugin",
        "version": "0.0.1",
        "list": "readme",
        "dependents": "",
        "type": "application/json",
        "readme": "!! Usage\n\nEdit [[`tiddlers/FileSystemPaths.tid`|FileSystemPaths.tid]] using VSCode or automatically updated by TiddlyGitDesktop (instead of edit it from the TiddlyWiki) to be something like:\n\n```tid\n[!is[system]kin::to[APrivateContent]addprefix[subwiki/private-wiki/]]\n[!is[system]kin::to[Photos]addprefix[subwiki/private-wiki-photos/]]\n```\n",
        "requires-reload": "no"
    },
    {
        "title": "$:/plugins/linonetwo/watch-fs",
        "description": "Reload changed tiddlers from disc",
        "author": "LinOnetwo",
        "core-version": ">=5.1.22",
        "plugin-type": "plugin",
        "version": "0.0.1",
        "list": "readme",
        "dependents": "",
        "type": "application/json",
        "readme": "!! About\n\nThis plugin enables TiddlyWiki to watch the change in your disk, and if you edit one of your tiddler using editor likes VSCode and save it on the disk, the change will immediately reflected in the browser.\n\nSee [[https://github.com/Jermolene/TiddlyWiki5/issues/3060]] for related discussions.\n\n!! [[FileSystemMonitor.js|$:/plugins/linonetwo/watch-fs/FileSystemMonitor.js]]\n\nThis module watches the file system in the tiddlers folder and any changes to\nthe files in the folder that don't come from the browser are reported to the\nbrowser. So if you make a new .tid file in the tiddlers folder it will appear\nin the wiki in the browser without needing to restart the server. You can also\ndelete files to remove the tiddlers from the browser.\n\n!! Installation\n\nSome of the files are generated, but all the files are generated and ready to use in the `watch-fs` folder.\n\n!! Usage\n\nThis plugin will cause trouble if you build wiki with it enabled,\nso you have to remove it from your `tiddlywiki.info`, and add it to your wiki start arguments:\n\n```shell\ntiddlywiki +plugins/tiddlywiki/filesystem +plugins/tiddlywiki/tiddlyweb +plugins/linonetwo/watch-fs <path-to-wiki-folder> --listen\n```\n\n(why `+plugins/tiddlywiki/filesystem +plugins/tiddlywiki/tiddlyweb` here? See [[https://github.com/Jermolene/TiddlyWiki5/issues/4484#issuecomment-613200370]] for details)\n\n!!! Liminitation\n\n# can't handle rename in the disk, you can only rename from within the wiki (no such API to tell tw I've renamed a file)\n# I haven't tested this with [[$:/config/FileSystemPaths]] and [[Fix file info PR|https://github.com/Jermolene/TiddlyWiki5/pull/4630]] , but I use this feature every day, so I will definitely support it.\n# Can't handle if git change the tiddler while you are open its Draft tiddler (might be fixed by [[Deleting a draft tiddler should not also delete the original tiddler|https://github.com/Jermolene/TiddlyWiki5/issues/4792]] )\n\n!!! Using on network share / NFS\n\nIf the files are mounted from a remote, you will most likely use polling instead of the OS-native watcher.\nThis is not done automaticly, since there is really no way for us to detect that.\n\nIf your files are on a remote, you should set the environment-variable `CHOKIDAR_USEPOLLING=1`.\nYou can also configure the polling interval (default 100ms) using `CHOKIDAR_INTERVAL`.\n\n!! Implementation Details\n\n!!! How to decide whether a change is comes from the browser?\n\nWe will compare disk file and wiki file, if there is any discrepancy,\nthen we know the change is not made from the wiki, it is made by git or VSCode, in this case we read data from the disc,\nand add data to the tiddlywiki.\n\n!!! How to sync changes to the browser?\n\nwe can't trigger sync from the server, so we have to set a smaller sync interval in the client side.\n\nSo this plugin ship with a large [[$:/config/SyncPollingInterval]] to disable the build-in sync,\nand we add a new route `/linonetwo/watch-fs-can-sync` to the simple server, it will return `true` or `false`,\nand browser will poll this route, to see if it needs to trigger a `$tw.syncer.syncFromServer()`.\n",
        "requires-reload": "yes"
    },
    {
        "title": "$:/plugins/linonetwo/zx-script",
        "name": "ZX Script Executor",
        "description": "ZX is a tool for writing better scripts, this plugin allows you to execute a tiddler with zx.",
        "author": "LinOnetwo",
        "core-version": ">=5.1.22",
        "plugin-type": "plugin",
        "version": "0.0.1",
        "dependents": "$:/plugins/linonetwo/itonnote",
        "list": "readme developer",
        "type": "application/json",
        "readme": "!! Background\n\n[[google/zx|https://github.com/google/zx]] is a tool for writing better scripts, with Javascript.\n\nThis tiddlywiki plugin enables you to run any tiddler with zx.\n\n!! Usage\n\n!!! Tiddler Type\n\nTiddler with title extension `*.js *.md *.mjs` can be execute without problem. Other tiddler witout extension (no `.xxx`) will be executed as `*.md` file, for example, tid file without extions will be executed as `*.md`, but it works without problem too, even you are writing wiki text instead of markdown.\n\nIf you add filetype `application/javascript` to your tiddler, it will be recognized as `*.mjs`.\n\n!!! Prerequisit\n\nThis plugin requires [TiddlyGit](https://github.com/tiddly-gittly/TiddlyGit-Desktop) environment to function properly. It will send tiddler content to the `zx` inside TiddlyGit, and prints the output.\n\n!!! Button\n\nA ViewToolbar button is added. You can click on it to execute the script inside your tiddler.\n\nAnd the zx output will be printed below your tiddler content.\n\n!! Developer Documentation\n\nSee [[$:/plugins/linonetwo/zx-script/developer]]\n",
        "requires-reload": "yes"
    },
    {
        "title": "$:/themes/linonetwo/itonnote",
        "name": "ItonNote Theme",
        "version": "0.1.10",
        "author": "LinOnetwo",
        "core-version": ">=5.0.0",
        "plugin-type": "theme",
        "description": "Notion and VSCode inspired theme",
        "dependents": "$:/themes/tiddlywiki/vanilla",
        "plugin-priority": "1",
        "type": "application/json",
        "readme": "Notion and VSCode inspired theme. Adapted for light theme.\n",
        "requires-reload": "no"
    }
];

/*\
title: $:/plugins/tiddlywiki/pluginlibrary/libraryserver.js
type: application/javascript
module-type: library

A simple HTTP-over-window.postMessage implementation of a standard TiddlyWeb-compatible server. It uses real HTTP to load the individual tiddler JSON files.

\*/
(function(){

/*jslint node: true, browser: true */
/*global $tw: false */
"use strict";

// Listen for window messages
window.addEventListener("message",function listener(event){
	console.log("plugin library: Received message from",event.origin);
	console.log("plugin library: Message content",event.data);
	switch(event.data.verb) {
		case "GET":
			if(event.data.url === "recipes/library/tiddlers.json") {
				// Route for recipes/library/tiddlers.json
				event.source.postMessage({
					verb: "GET-RESPONSE",
					status: "200",
					cookies: event.data.cookies,
					url: event.data.url,
					type: "application/json",
					body: JSON.stringify(assetList,null,4)
				},"*");
			} else if(event.data.url.indexOf("recipes/library/tiddlers/") === 0) {
				var url = "recipes/library/tiddlers/" + encodeURIComponent(removePrefix(event.data.url,"recipes/library/tiddlers/"));
				// Route for recipes/library/tiddlers/<uri-encoded-tiddler-title>.json
				httpGet(url,function(err,responseText) {
					if(err) {
						event.source.postMessage({
							verb: "GET-RESPONSE",
							status: "404",
							cookies: event.data.cookies,
							url: event.data.url,
							type: "text/plain",
							body: "Not found"
						},"*");
					} else {
						event.source.postMessage({
							verb: "GET-RESPONSE",
							status: "200",
							cookies: event.data.cookies,
							url: event.data.url,
							type: "application/json",
							body: responseText
						},"*");
					}
				});
			} else {
				event.source.postMessage({
					verb: "GET-RESPONSE",
					status: "404",
					cookies: event.data.cookies,
					url: event.data.url,
					type: "text/plain",
					body: "Not found"
				},"*");
			}
			break;
	}
},false);

// Helper to remove string prefixes
function removePrefix(string,prefix) {
	if(string.indexOf(prefix) === 0) {
		return string.substr(prefix.length);
	} else {
		return string;
	}
}

// Helper for HTTP GET
function httpGet(url,callback) {
	var http = new XMLHttpRequest();
	http.open("GET",url,true);
	http.onreadystatechange = function() {
		if(http.readyState == 4 && http.status == 200) {
			callback(null,http.responseText);
		}
	};
	http.send();
}

})();

</script>
</head>
<body><h1>HelloThere</h1><p>This is the TiddlyWiki plugin library. It is not intended to be opened directly in the browser.</p><p>See <a href="https://tiddlywiki.com/" target="_blank">https://tiddlywiki.com/</a> for details of how to install plugins.</p></body>
</html>